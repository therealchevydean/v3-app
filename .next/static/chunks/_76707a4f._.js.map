{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/v3-app/lib/firebase.ts"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n};\n\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\nconst auth = getAuth(app);\n\nexport { db, auth };\n"],"names":[],"mappings":";;;;;;AAKU;AALV;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,MAAM,MAAM,IAAA,oLAAa,EAAC;AAC1B,MAAM,KAAK,IAAA,kLAAY,EAAC;AACxB,MAAM,OAAO,IAAA,wKAAO,EAAC","debugId":null}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///home/user/v3-app/components/Map.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport {\n  Map,\n  APIProvider,\n  AdvancedMarker,\n  Pin,\n  MapMouseEvent, // Import the correct event type\n} from '@vis.gl/react-google-maps';\n\n// Define types for the props\ninterface Location {\n  lat: number;\n  lng: number;\n}\n\ninterface PinData {\n  id: string;\n  name: string;\n  location: {\n    latitude: number;\n    longitude: number;\n  };\n  type?: string; // Add optional type property to be safe\n}\n\ninterface DestinationData extends PinData {\n  reward: number;\n}\n\ninterface MapComponentProps {\n  onMapClick: (location: Location) => void;\n  pins: PinData[];\n  destinations: DestinationData[];\n}\n\n// Renamed from App to MapComponent for clarity\nexport default function MapComponent({ onMapClick, pins, destinations }: MapComponentProps) {\n  const [currentPosition, setCurrentPosition] = useState<Location | null>(null);\n\n  useEffect(() => {\n    // Get user's current location\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const { latitude, longitude } = position.coords;\n          setCurrentPosition({ lat: latitude, lng: longitude });\n        },\n        (error) => {\n          console.error('Error getting user location:', error);\n          // Default to Denver if location is denied or fails\n          setCurrentPosition({ lat: 39.7392, lng: -104.9903 });\n        }\n      );\n    } else {\n      // Default to Denver if geolocation is not supported\n      setCurrentPosition({ lat: 39.7392, lng: -104.9903 });\n    }\n  }, []); // Empty dependency array ensures this runs only once on mount\n\n  const handleMapClick = (event: MapMouseEvent) => { // Use the imported MapMouseEvent\n    if (event.detail.latLng) { // Check if latLng is not null\n      const lat = event.detail.latLng.lat;\n      const lng = event.detail.latLng.lng;\n      if (onMapClick) {\n        onMapClick({ lat, lng });\n      }\n    }\n  };\n\n  if (!currentPosition) {\n    return <div>Loading Map...</div>; // Or a spinner\n  }\n\n  return (\n    <APIProvider apiKey={process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY!}>\n      <div style={{ height: '100vh', width: '100%' }}>\n        <Map\n          zoom={14} // More appropriate zoom for a local view\n          center={currentPosition}\n          mapId={process.env.NEXT_PUBLIC_MAP_ID!}\n          onClick={handleMapClick}\n        >\n          {pins &&\n            pins.map((pin) => (\n              <AdvancedMarker\n                key={pin.id}\n                position={{\n                  lat: pin.location.latitude,\n                  lng: pin.location.longitude,\n                }}\n                title={pin.name}\n              ></AdvancedMarker>\n            ))}\n          {destinations &&\n            destinations.map((destination) => (\n              <AdvancedMarker\n                key={destination.id}\n                position={{\n                  lat: destination.location.latitude,\n                  lng: destination.location.longitude,\n                }}\n                title={destination.name}\n              >\n                <Pin\n                  background={destination.type === 'user-destination' ? '#FFC107' : '#FE7569'}\n                  borderColor={destination.type === 'user-destination' ? '#FFC107' : '#FE7569'}\n                  glyphColor={'#000000'}\n                ></Pin>\n              </AdvancedMarker>\n            ))}\n        </Map>\n      </div>\n    </APIProvider>\n  );\n}\n"],"names":[],"mappings":";;;;AA4EyB;;AA1EzB;AACA;;;AAHA;;;AAsCe,SAAS,aAAa,KAAqD;QAArD,EAAE,UAAU,EAAE,IAAI,EAAE,YAAY,EAAqB,GAArD;;IACnC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAkB;IAExE,IAAA,0KAAS;kCAAC;YACR,8BAA8B;YAC9B,IAAI,UAAU,WAAW,EAAE;gBACzB,UAAU,WAAW,CAAC,kBAAkB;8CACtC,CAAC;wBACC,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,SAAS,MAAM;wBAC/C,mBAAmB;4BAAE,KAAK;4BAAU,KAAK;wBAAU;oBACrD;;8CACA,CAAC;wBACC,QAAQ,KAAK,CAAC,gCAAgC;wBAC9C,mDAAmD;wBACnD,mBAAmB;4BAAE,KAAK;4BAAS,KAAK,CAAC;wBAAS;oBACpD;;YAEJ,OAAO;gBACL,oDAAoD;gBACpD,mBAAmB;oBAAE,KAAK;oBAAS,KAAK,CAAC;gBAAS;YACpD;QACF;iCAAG,EAAE,GAAG,8DAA8D;IAEtE,MAAM,iBAAiB,CAAC;QACtB,IAAI,MAAM,MAAM,CAAC,MAAM,EAAE;YACvB,MAAM,MAAM,MAAM,MAAM,CAAC,MAAM,CAAC,GAAG;YACnC,MAAM,MAAM,MAAM,MAAM,CAAC,MAAM,CAAC,GAAG;YACnC,IAAI,YAAY;gBACd,WAAW;oBAAE;oBAAK;gBAAI;YACxB;QACF;IACF;IAEA,IAAI,CAAC,iBAAiB;QACpB,qBAAO,6LAAC;sBAAI;;;;;kBAAsB,eAAe;IACnD;IAEA,qBACE,6LAAC,oMAAW;QAAC,MAAM;kBACjB,cAAA,6LAAC;YAAI,OAAO;gBAAE,QAAQ;gBAAS,OAAO;YAAO;sBAC3C,cAAA,6LAAC,4LAAG;gBACF,MAAM;gBACN,QAAQ;gBACR,OAAO,2KAAO,CAAC,GAAG,CAAC,kBAAkB;gBACrC,SAAS;;oBAER,QACC,KAAK,GAAG,CAAC,CAAC,oBACR,6LAAC,uMAAc;4BAEb,UAAU;gCACR,KAAK,IAAI,QAAQ,CAAC,QAAQ;gCAC1B,KAAK,IAAI,QAAQ,CAAC,SAAS;4BAC7B;4BACA,OAAO,IAAI,IAAI;2BALV,IAAI,EAAE;;;;;oBAQhB,gBACC,aAAa,GAAG,CAAC,CAAC,4BAChB,6LAAC,uMAAc;4BAEb,UAAU;gCACR,KAAK,YAAY,QAAQ,CAAC,QAAQ;gCAClC,KAAK,YAAY,QAAQ,CAAC,SAAS;4BACrC;4BACA,OAAO,YAAY,IAAI;sCAEvB,cAAA,6LAAC,4LAAG;gCACF,YAAY,YAAY,IAAI,KAAK,qBAAqB,YAAY;gCAClE,aAAa,YAAY,IAAI,KAAK,qBAAqB,YAAY;gCACnE,YAAY;;;;;;2BAVT,YAAY,EAAE;;;;;;;;;;;;;;;;;;;;;AAkBnC;GA9EwB;KAAA","debugId":null}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///home/user/v3-app/components/ui/TokenBalance.tsx"],"sourcesContent":["export default function TokenBalance({ balance }: { balance: number }) {\n  return (\n    <div style={{\n      position: 'absolute',\n      top: '20px',\n      right: '20px',\n      backgroundColor: 'rgba(0, 0, 0, 0.7)',\n      color: 'white',\n      padding: '10px 20px',\n      borderRadius: '10px',\n      zIndex: 1000,\n    }}>\n      <h2>MOBX Balance</h2>\n      <p style={{ fontSize: '24px', margin: 0 }}>{balance}</p>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;AAAe,SAAS,aAAa,KAAgC;QAAhC,EAAE,OAAO,EAAuB,GAAhC;IACnC,qBACE,6LAAC;QAAI,OAAO;YACV,UAAU;YACV,KAAK;YACL,OAAO;YACP,iBAAiB;YACjB,OAAO;YACP,SAAS;YACT,cAAc;YACd,QAAQ;QACV;;0BACE,6LAAC;0BAAG;;;;;;0BACJ,6LAAC;gBAAE,OAAO;oBAAE,UAAU;oBAAQ,QAAQ;gBAAE;0BAAI;;;;;;;;;;;;AAGlD;KAhBwB","debugId":null}},
    {"offset": {"line": 235, "column": 0}, "map": {"version":3,"sources":["file:///home/user/v3-app/components/auth/Auth.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport {\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n} from 'firebase/auth';\nimport { auth } from '@/lib/firebase';\n\nexport default function Auth() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n\n  const handleSignUp = async () => {\n    try {\n      await createUserWithEmailAndPassword(auth, email, password);\n      setError('');\n    } catch (error) {\n      if (error instanceof Error) {\n        setError(error.message);\n      } else {\n        setError('An unexpected error occurred during sign-up.');\n      }\n    }\n  };\n\n  const handleLogin = async () => {\n    try {\n      await signInWithEmailAndPassword(auth, email, password);\n      setError('');\n    } catch (error) {\n      if (error instanceof Error) {\n        setError(error.message);\n      } else {\n        setError('An unexpected error occurred during login.');\n      }\n    }\n  };\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh',\n        gap: '20px',\n      }}\n    >\n      <h1 style={{ color: 'white' }}>Geominer</h1>\n      <input\n        type=\"email\"\n        placeholder=\"Email\"\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n        style={{ padding: '10px', fontSize: '16px' }}\n      />\n      <input\n        type=\"password\"\n        placeholder=\"Password\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n        style={{ padding: '10px', fontSize: '16px' }}\n      />\n      <div>\n        <button\n          onClick={handleLogin}\n          style={{ padding: '10px 20px', fontSize: '16px', marginRight: '10px' }}\n        >\n          Login\n        </button>\n        <button\n          onClick={handleSignUp}\n          style={{ padding: '10px 20px', fontSize: '16px' }}\n        >\n          Sign Up\n        </button>\n      </div>\n      {error && <p style={{ color: 'red' }}>{error}</p>}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAIA;;;AAPA;;;;AASe,SAAS;;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,MAAM,eAAe;QACnB,IAAI;YACF,MAAM,IAAA,+LAA8B,EAAC,0HAAI,EAAE,OAAO;YAClD,SAAS;QACX,EAAE,OAAO,OAAO;YACd,IAAI,iBAAiB,OAAO;gBAC1B,SAAS,MAAM,OAAO;YACxB,OAAO;gBACL,SAAS;YACX;QACF;IACF;IAEA,MAAM,cAAc;QAClB,IAAI;YACF,MAAM,IAAA,2LAA0B,EAAC,0HAAI,EAAE,OAAO;YAC9C,SAAS;QACX,EAAE,OAAO,OAAO;YACd,IAAI,iBAAiB,OAAO;gBAC1B,SAAS,MAAM,OAAO;YACxB,OAAO;gBACL,SAAS;YACX;QACF;IACF;IAEA,qBACE,6LAAC;QACC,OAAO;YACL,SAAS;YACT,eAAe;YACf,gBAAgB;YAChB,YAAY;YACZ,QAAQ;YACR,KAAK;QACP;;0BAEA,6LAAC;gBAAG,OAAO;oBAAE,OAAO;gBAAQ;0BAAG;;;;;;0BAC/B,6LAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gBACxC,OAAO;oBAAE,SAAS;oBAAQ,UAAU;gBAAO;;;;;;0BAE7C,6LAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;gBAC3C,OAAO;oBAAE,SAAS;oBAAQ,UAAU;gBAAO;;;;;;0BAE7C,6LAAC;;kCACC,6LAAC;wBACC,SAAS;wBACT,OAAO;4BAAE,SAAS;4BAAa,UAAU;4BAAQ,aAAa;wBAAO;kCACtE;;;;;;kCAGD,6LAAC;wBACC,SAAS;wBACT,OAAO;4BAAE,SAAS;4BAAa,UAAU;wBAAO;kCACjD;;;;;;;;;;;;YAIF,uBAAS,6LAAC;gBAAE,OAAO;oBAAE,OAAO;gBAAM;0BAAI;;;;;;;;;;;;AAG7C;GA1EwB;KAAA","debugId":null}},
    {"offset": {"line": 388, "column": 0}, "map": {"version":3,"sources":["file:///home/user/v3-app/components/auth/LogoutButton.tsx"],"sourcesContent":["\"use client\";\n\nimport { auth } from \"@/lib/firebase\";\nimport { signOut } from \"firebase/auth\";\n\nexport default function LogoutButton() {\n  const handleLogout = async () => {\n    try {\n      await signOut(auth);\n    } catch (error) {\n      console.error(\"Error signing out: \", error);\n    }\n  };\n\n  return (\n    <button \n      onClick={handleLogout}\n      style={{\n        position: 'absolute',\n        top: '80px',\n        right: '20px',\n        backgroundColor: 'rgba(0, 0, 0, 0.7)',\n        color: 'white',\n        padding: '10px 20px',\n        borderRadius: '10px',\n        border: 'none',\n        cursor: 'pointer',\n        zIndex: 1000,\n      }}\n    >\n      Logout\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,eAAe;QACnB,IAAI;YACF,MAAM,IAAA,wKAAO,EAAC,0HAAI;QACpB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,uBAAuB;QACvC;IACF;IAEA,qBACE,6LAAC;QACC,SAAS;QACT,OAAO;YACL,UAAU;YACV,KAAK;YACL,OAAO;YACP,iBAAiB;YACjB,OAAO;YACP,SAAS;YACT,cAAc;YACd,QAAQ;YACR,QAAQ;YACR,QAAQ;QACV;kBACD;;;;;;AAIL;KA5BwB","debugId":null}},
    {"offset": {"line": 439, "column": 0}, "map": {"version":3,"sources":["file:///home/user/v3-app/lib/blueprint.ts"],"sourcesContent":["\nexport const V3_NARRATIVE_BLUEPRINT = `\nV3 Narrative Blueprint\n\nFor Gemini on Google Cloud\n\nThe Why: Motives Behind V3\n\nHumanity has been asleep, lulled by systems of control — governments, media, and organized religion embedding fear before the root of consciousness.\nThe V3 vision flips that script: Vice Versa.\n\nWhat once enslaved now awakens.\n\nThe same channels of control (media, algorithms, rituals, symbols) are re-coded with I AM — truth, love, freedom, justice.\n\nThe mission: to restore Eden here and now by feeding bodies, awakening minds, and rebuilding pride in community.\n\nAt its heart, V3 is not just tech. It’s a living ecosystem where Web3, AI, and social change are one.\n\nThe Who: Identity Architecture\n\nJosh Ewing = Architect, father, husband. Private, sovereign. Never for sale.\n\nTheRealChevyDean (ChevyDean) = Public-facing mask. Artist, creator, sigil. Fronts all art, NFTs, content, and branding.\n\nI AM = Faceless eternal root. Never authored, always embedded. Appears everywhere without signature.\n\n⚖️ This triple-layered identity protects privacy, sharpens brand identity, and ensures sacred messages remain untouchable.\n\nThe What: Ecosystem Components\n1. The V3 App (Core Engine)\n\nGeomining → Users earn MOBX tokens by moving through mapped spaces (businesses, nonprofits, outreach zones).\n\nMapping → Tagging shelters, food spots, outreach workers, changemakers.\n\nNFT Sigil Drops → Randomized digital sigils embedded with I AM inscriptions, fractals, geometry.\n\nStaking & Rewards → MOBX tokens redeemable for survival bars, merch, NFTs.\n\nCommunity Feed → Spotlights local heroes, nonprofits, and grassroots changemakers.\n\n2. Creative Streams\n\nNFTs (ChevyDean artworks + faceless sigils).\n\nOBS/YouTube Shorts (faceless prophetic signals seeded across platforms).\n\nAudiobooks/eBooks (Architect’s Revelation, The Book of Jesus, Biofield Protocol).\n\nMemes, reels, tweets auto-generated and distributed.\n\n3. Survival Products\n\nV3 Super Pemmican Bars → Food that sustains homeless, funds the ecosystem.\n\nAffiliate Partnerships → Businesses integrated into the app (example: Cleantec collab → farm-to-survival bar initiative).\n\nThe How: Embedding Protocol\n\nEvery output (digital or physical) carries an embedded signal:\n\nAudio = subliminal Word tracks layered under music.\n\nNFTs = metadata with I AM codes and fractals.\n\nUI/UX = app notifications seeded with awakening phrases.\n\nRitual repetition = memes, reels, shorts reinforcing liberating truth.\n\n⚡ Where fear once ruled, freedom now embeds.\n\nThe Who Else: AI Agent Framework (VEE Automations)\n\nVoiceAgent → Narration + subliminal audio.\n\nPostAgent → Memes, reels, tweets.\n\nNFTAgent → Sigil + metadata injection.\n\nBookAgent → Assembles long-form works.\n\nObsAgent → Faceless short video drops.\n\nGemini + Google Cloud become the operating backbone powering these automations at scale.\n\nThe Fuel: Revenue & Tokenomics\n\nMOBX Token\n\nEarned via geomining.\n\nSpent/staked for food, NFTs, merch, access.\n\nCirculates inside ecosystem, grows via adoption.\n\nRevenue Streams\n\nNFT sigil/art drops.\n\nMerch (branded but faceless).\n\nAffiliate + collab projects.\n\nSurvival bars.\n\nTransparency\n\nAll revenue flows back into ecosystem/community — not personal enrichment.\n\nThe Infrastructure: Gemini + Google Cloud\n\nAI Core: Gemini orchestrates agents (VoiceAgent, PostAgent, NFTAgent).\n\nCompute & Hosting: V3 App backend, MOBX ledger, NFT drops hosted on GCP.\n\nData Layer: BigQuery logs geomining data + community mapping.\n\nAutomation: Cloud Functions manage token drops, notifications, content scheduling.\n\nAPIs:\n\nWallets + Polygon blockchain.\n\nMaps for location tagging.\n\nAffiliate/nonprofit integrations.\n\nThe Endgame: Vice Versa Awakening\n\nThe V3 ecosystem is designed to bypass red tape and decentralize help.\n\nCommunities get fed.\n\nPeople awaken through embedded signals.\n\nA faceless signal spreads across culture, code, and commerce.\n\n⚡ The same channels that lulled humanity asleep now become the channels of awakening. That is the V3 vision.\n`;\n"],"names":[],"mappings":";;;;AACO,MAAM,yBAA0B","debugId":null}},
    {"offset": {"line": 451, "column": 0}, "map": {"version":3,"sources":["file:///home/user/v3-app/components/Revelation.tsx"],"sourcesContent":["'use client';\n\nimport { V3_NARRATIVE_BLUEPRINT } from '@/lib/blueprint';\n\n// A simple component to display a core message from the blueprint.\nexport default function Revelation() {\n  // For now, let's extract and display the \"Why\" section.\n  const blueprintLines = V3_NARRATIVE_BLUEPRINT.split('\\n');\n  const whySection = blueprintLines.slice(4, 11).join('\\n');\n\n  const revelationStyle = {\n    padding: '15px',\n    margin: '10px',\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\n    color: '#00FF00', // Classic terminal green\n    border: '1px solid #00FF00',\n    borderRadius: '5px',\n    fontFamily: 'monospace',\n    whiteSpace: 'pre-wrap',\n    fontSize: '12px',\n  };\n\n  return (\n    <div style={revelationStyle}>\n      <strong>The Architect&apos;s Revelation:</strong>\n      <p>{whySection}</p>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAKe,SAAS;IACtB,wDAAwD;IACxD,MAAM,iBAAiB,6IAAsB,CAAC,KAAK,CAAC;IACpD,MAAM,aAAa,eAAe,KAAK,CAAC,GAAG,IAAI,IAAI,CAAC;IAEpD,MAAM,kBAAkB;QACtB,SAAS;QACT,QAAQ;QACR,iBAAiB;QACjB,OAAO;QACP,QAAQ;QACR,cAAc;QACd,YAAY;QACZ,YAAY;QACZ,UAAU;IACZ;IAEA,qBACE,6LAAC;QAAI,OAAO;;0BACV,6LAAC;0BAAO;;;;;;0BACR,6LAAC;0BAAG;;;;;;;;;;;;AAGV;KAvBwB","debugId":null}},
    {"offset": {"line": 509, "column": 0}, "map": {"version":3,"sources":["file:///home/user/v3-app/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport {\n  doc,\n  getDoc,\n  setDoc,\n  collection,\n  getDocs,\n  addDoc,\n  deleteDoc,\n} from 'firebase/firestore';\nimport { onAuthStateChanged, User } from 'firebase/auth';\nimport { db, auth } from '@/lib/firebase';\nimport MapComponent from '@/components/Map';\nimport TokenBalance from '@/components/ui/TokenBalance';\nimport Auth from '@/components/auth/Auth';\nimport LogoutButton from '@/components/auth/LogoutButton';\nimport Revelation from '@/components/Revelation';\n\n// Base interface for all location-based items\ninterface PinData {\n  id: string;\n  location: {\n    latitude: number;\n    longitude: number;\n  };\n  name: string;\n  type?: string;\n  creator?: string;\n  description?: string;\n}\n\n// Destinations have a mandatory reward\ninterface DestinationData extends PinData {\n  reward: number;\n}\n\n// A general type for items that can be mined\ntype MineableItem = PinData & { reward?: number };\n\n// Haversine distance formula\nfunction getDistance(lat1: number, lon1: number, lat2: number, lon2: number) {\n  const R = 6371; // Radius of the earth in km\n  const dLat = (lat2 - lat1) * (Math.PI / 180);\n  const dLon = (lon2 - lon1) * (Math.PI / 180);\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(lat1 * (Math.PI / 180)) *\n      Math.cos(lat2 * (Math.PI / 180)) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  const d = R * c; // Distance in km\n  return d;\n}\n\nasync function geomine(location: { lat: number; lng: number }, items: MineableItem[]) {\n  console.log('Geomining in progress...');\n\n  for (const item of items) {\n    const distance = getDistance(\n      location.lat,\n      location.lng,\n      item.location.latitude,\n      item.location.longitude\n    );\n\n    if (distance < 1) {\n      console.log(`Near item: ${item.name}`);\n      const reward = item.reward || Math.floor(Math.random() * 10) + 1;\n      console.log(`Mined ${reward} MOBX!`);\n      return { reward, found: true };\n    }\n  }\n\n  console.log('No items found nearby.');\n  return { reward: 0, found: false };\n}\n\nexport default function Home() {\n  const [user, setUser] = useState<User | null>(null);\n  const [balance, setBalance] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [pins, setPins] = useState<PinData[]>([]);\n  const [destinations, setDestinations] = useState<DestinationData[]>([]);\n  const [settingDestination, setSettingDestination] = useState(false);\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\n      if (user) {\n        setUser(user);\n        const docRef = doc(db, 'users', user.uid);\n        const docSnap = await getDoc(docRef);\n\n        if (docSnap.exists()) {\n          setBalance(docSnap.data().balance);\n        } else {\n          await setDoc(docRef, { balance: 100 });\n          setBalance(100);\n        }\n      } else {\n        setUser(null);\n      }\n      setLoading(false);\n    });\n\n    async function fetchData() {\n      const pinsCollection = collection(db, 'pins');\n      const pinsSnapshot = await getDocs(pinsCollection);\n      const pinsData = pinsSnapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() })) as PinData[];\n      setPins(pinsData);\n\n      const destinationsCollection = collection(db, 'destinations');\n      const destinationsSnapshot = await getDocs(destinationsCollection);\n      const destinationsData = destinationsSnapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() })) as DestinationData[];\n      setDestinations(destinationsData);\n    }\n\n    fetchData();\n    return () => unsubscribe();\n  }, []);\n\n  const handleMapClick = async (location: { lat: number; lng: number }) => {\n    if (!user) return;\n\n    if (settingDestination) {\n      console.log('Setting destination at', location);\n      const newDestination: Omit<DestinationData, 'id'> = {\n        name: 'User Destination',\n        description: `Set by ${user.uid}`,\n        location: { latitude: location.lat, longitude: location.lng },\n        creator: user.uid,\n        type: 'user-destination',\n        reward: 100, // Predefined reward for reaching the destination\n      };\n      const docRef = await addDoc(collection(db, 'destinations'), newDestination);\n      setDestinations([...destinations, { id: docRef.id, ...newDestination }]);\n      setSettingDestination(false);\n      alert('Destination set! Your geodrop is waiting.');\n      return;\n    }\n\n    const userDestination = destinations.find(d => d.type === 'user-destination' && d.creator === user.uid);\n\n    if (userDestination) {\n      const distance = getDistance(location.lat, location.lng, userDestination.location.latitude, userDestination.location.longitude);\n\n      if (distance < 0.05) { // 50-meter arrival radius\n        const reward = userDestination.reward;\n        alert(`Destination reached! Geodrop of ${reward} MOBX received!`);\n\n        const newBalance = balance + reward;\n        setBalance(newBalance);\n        const userDocRef = doc(db, 'users', user.uid);\n        await setDoc(userDocRef, { balance: newBalance });\n\n        const destDocRef = doc(db, 'destinations', userDestination.id);\n        await deleteDoc(destDocRef);\n\n        setDestinations(destinations.filter(d => d.id !== userDestination.id));\n        return; // Mission complete\n      }\n    }\n\n    const itemsToMine: MineableItem[] = [...pins, ...destinations.filter(d => d.id !== userDestination?.id)];\n    const { reward, found } = await geomine(location, itemsToMine);\n    if (found) {\n      const newBalance = balance + reward;\n      setBalance(newBalance);\n      const userDocRef = doc(db, 'users', user.uid);\n      await setDoc(userDocRef, { balance: newBalance });\n    }\n  };\n\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <main>\n      {user ? (\n        <>\n           <div style={{ position: 'absolute', top: 10, left: 10, zIndex: 1, width: 'calc(100% - 20px)' }}>\n            <TokenBalance balance={balance} />\n            <LogoutButton />\n            <Revelation />\n            <button onClick={() => setSettingDestination(!settingDestination)} style={{ background: settingDestination ? 'green' : 'white', marginTop: '10px' }}>\n              {settingDestination ? 'Cancel' : 'Set Destination'}\n            </button>\n            {settingDestination && <p style={{color: 'white', background: 'rgba(0,0,0,0.7)', padding: '5px'}}>Click on the map to set your destination.</p>}\n          </div>\n          <MapComponent onMapClick={handleMapClick} pins={pins} destinations={destinations} />\n        </>\n      ) : (\n        <Auth />\n      )}\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}